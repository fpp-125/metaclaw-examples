# Generated by metaclaw wizard (Obsidian + LLM scaffold)
# Secrets are injected at runtime; API keys are not stored in this file.
apiVersion: metaclaw/v1
kind: Agent
agent:
    name: obsidian-research-bot
    species: micro
    lifecycle: daemon
    habitat:
        network:
            mode: outbound
        mounts:
            - source: ./examples/obsidian-bot/vault
              target: /vault
            - source: ./examples/obsidian-bot/config
              target: /config
              readOnly: true
            - source: ./examples/obsidian-bot/logs
              target: /logs
        env:
            METACLAW_CONFIG_DIR: /config
            METACLAW_LOG_DIR: /logs
            OBSIDIAN_VAULT_DIR: /vault
    llm:
        provider: gemini_openai
        model: gemini-2.5-pro
        baseURL: https://generativelanguage.googleapis.com/v1beta/openai/
        apiKeyEnv: GEMINI_API_KEY
    runtime:
        image: alpine:3.20@sha256:a4f4213abb84c497377b8544c81b3564f313746700372ec4fe84653e4fb03805
    command:
        - sh
        - -lc
        - |
          echo "MetaClaw Obsidian daemon scaffold started"
          LOG_PATH="${METACLAW_LOG_DIR:-/logs}/metaclaw_bot.log"
          echo "vault=${OBSIDIAN_VAULT_DIR:-/vault} config=${METACLAW_CONFIG_DIR:-/config} provider=${METACLAW_LLM_PROVIDER:-none} model=${METACLAW_LLM_MODEL:-none}" | tee -a "$LOG_PATH"
          # Replace this loop with your bot runtime (OpenAI-compatible SDK, custom binary, or script).
          while true; do
            date -u +"%Y-%m-%dT%H:%M:%SZ heartbeat" | tee -a "$LOG_PATH"
            sleep 60
          done
